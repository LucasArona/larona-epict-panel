/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","emotion","@grafana/data","@grafana/runtime"],(function(e,n,t,a,r){return function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(n){return e[n]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=5)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n){e.exports=t},function(e,n){e.exports=a},function(e,n){e.exports=r},function(e,n,t){"use strict";t.r(n);var a=t(3);function r(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}var o=t(0),l=t.n(o),i=t(2),c=t(1),s=t(4);function u(e,n){var t,a,r,o="N/A",l=null===(t=e)||void 0===t?void 0:t.values.length;if(l){for(;l--&&null==(null===(a=e)||void 0===a?void 0:a.values.get(l)););-1!==l&&(o=null===(r=e)||void 0===r?void 0:r.values.get(l).toFixed(n).toString())}return o}var f,d,b,h,m,p,g,x,v,E,y,k,O,C,z,w,S,j,L,H=function(e){e.ctrlKey&&alert("X:"+e.nativeEvent.offsetX+" Y:"+e.nativeEvent.offsetY)},F=Object(c.stylesFactory)((function(){return{wrapper:Object(i.css)(y||(y=r(["\n      display: flex;\n      justify-content: center;\n    "],["\n      display: flex;\n      justify-content: center;\n    "]))),imgWrapper:Object(i.css)(k||(k=r(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),box:Object(i.css)(O||(O=r(["\n      position: absolute;\n    "],["\n      position: absolute;\n    "]))),boxLink:Object(i.css)(C||(C=r(["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "],["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "]))),orbDefaults:Object(i.css)(z||(z=r(["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "],["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "]))),blink:Object(i.css)(w||(w=r(["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "],["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "]))),alignVertically:Object(i.css)(S||(S=r(["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "],["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "]))),boxPrefix:Object(i.css)(j||(j=r(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "]))),boxSuffix:Object(i.css)(L||(L=r(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "])))}})),T=function(){};t.d(n,"plugin",(function(){return N}));var N=new a.PanelPlugin((function(e){var n=e.options,t=e.data,o=(e.width,e.height,Object(s.getTemplateSrv)().replace(n.bgURL)),c=n.boxes,y=F();return l.a.createElement("div",{className:Object(i.cx)(y.wrapper)},l.a.createElement("div",{className:Object(i.cx)(y.imgWrapper),id:"img-wrapper"},l.a.createElement("img",{srcSet:o,onClick:function(e){return H(e)}}),c.map((function(e,n){return l.a.createElement("span",{className:Object(i.cx)(y.box,Object(i.css)(f||(f=r(["\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "],["\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "])),e.ypos,e.xpos,O(e),e.angle))},l.a.createElement("a",{href:e.url?Object(s.getTemplateSrv)().replace(e.url):"#",className:Object(i.cx)(y.boxLink,e.url?Object(i.css)(d||(d=r(["\n                      cursor: pointer;\n                    "],["\n                      cursor: pointer;\n                    "]))):Object(i.css)(b||(b=r(["\n                      cursor: default;\n                    "],["\n                      cursor: default;\n                    "]))))},e.hasOrb&&e.orbHideText||e.hasOrb&&!e.orbHideText&&"Top"===e.orbLocation?l.a.createElement("span",{className:Object(i.cx)(k(e)?y.blink:"",y.orbDefaults,Object(i.css)(h||(h=r(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null,e.hasOrb&&e.orbHideText?null:l.a.createElement("div",{className:Object(i.cx)(Object(i.css)(m||(m=r(["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "],["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "])),e.fontSize))},e.hasOrb&&"Left"===e.orbLocation?l.a.createElement("span",{className:Object(i.cx)(k(e)?y.blink:"",y.orbDefaults,y.alignVertically,Object(i.css)(p||(p=r(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null,e.prefix?l.a.createElement("span",{className:Object(i.cx)(y.alignVertically,y.boxPrefix,Object(i.css)(g||(g=r(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.prefixSize)),title:C(e)},e.prefix):null,l.a.createElement("span",{className:Object(i.cx)(k(e)?y.blink:"",y.alignVertically)},z(e)),e.suffix?l.a.createElement("span",{className:Object(i.cx)(y.alignVertically,y.boxSuffix,Object(i.css)(x||(x=r(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.suffixSize)),title:C(e)},e.suffix):null,e.hasOrb&&"Right"===e.orbLocation?l.a.createElement("span",{className:Object(i.cx)(k(e)?y.blink:"",y.orbDefaults,y.alignVertically,Object(i.css)(v||(v=r(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null),e.hasOrb&&!e.orbHideText&&"Bottom"===e.orbLocation?l.a.createElement("span",{className:Object(i.cx)(k(e)?y.blink:"",y.orbDefaults,Object(i.css)(E||(E=r(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null))}))));function k(e){if(e.isUsingThresholds&&e.thresholds&&(e.blinkHigh||e.blinkLow)){var n=z(e),t=+e.thresholds.split(",")[0],a=+e.thresholds.split(",")[1];if(e.blinkHigh&&+n>=a)return!0;if(e.blinkLow&&+n<=t)return!0}return!1}function O(e){var n=z(e);if(e.isUsingThresholds&&e.thresholds){var t=+e.thresholds.split(",")[0];return+n>=+e.thresholds.split(",")[1]?e.colorHigh:+n<=t?e.colorLow:e.colorMedium}return e.color}function C(e){var n,t;return null!=(t=null!=(n=e.prefix)?n:"".concat(w(e.serie,5)))?t:"".concat(e.suffix)}function z(e){return w(e.serie,e.decimal)}function w(e,n){var r,o=void 0;if(t.series.every((function(t){var r=t.fields.filter((function(e){return e.type===a.FieldType.number})).find((function(n){var r=Object(a.getFieldDisplayName)(n,t);return(void 0===t.name||t.name===r?r:t.name+" ("+r+")")===e}));return null==r||(o=u(r,n),!1)})),void 0===o){var l=null===(r=t.series.find((function(n){return n.name===e})))||void 0===r?void 0:r.fields.find((function(e){return"number"===e.type}));o=u(l,n)}return void 0===o&&(o="N/A"),o}})).setPanelOptions((function(e){e.addTextInput({name:"Background URL",path:"bgURL"}).addCustomEditor({path:"boxes",name:"Boxes definitions",id:"boxesDefinitions",defaultValue:null,editor:function(e){var n=e.context,t=n.data,r=n.options;null==r.boxes&&(r.boxes=[]);var o=[{label:"Top",value:"Top"},{label:"Bottom",value:"Bottom"},{label:"Left",value:"Left"},{label:"Right",value:"Right"}],i=[];return t.forEach((function(e){e.fields.filter((function(e){return e.type===a.FieldType.number})).forEach((function(n){if(void 0!==n){var t=Object(a.getFieldDisplayName)(n,e),r=void 0===e.name||e.name===t?t:e.name+" ("+t+")";i.push({value:r,label:r})}}))})),l.a.createElement("div",{className:"section gf-form-group"},l.a.createElement("h4",{className:"section-heading"},"Boxes definitions"),r.boxes.map((function(n,t){return l.a.createElement("div",null,l.a.createElement("h5",null,"Box #",t),l.a.createElement("div",{className:"section gf-form-group"},l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.IconButton,{name:"trash-alt",size:"xl",surface:"panel",onClick:function(n){return function(n,t){n.target;delete r.boxes[t],r.boxes.splice(t,1),e.onChange(r.boxes)}(n,t)}}),l.a.createElement(c.IconButton,{name:"copy",size:"xl",surface:"panel",onClick:function(t){return function(n,t){n.target;r.boxes.push(Object.create(t)),e.onChange(r.boxes)}(t,n)}}))),l.a.createElement("div",{className:"section gf-form-group"},l.a.createElement("h5",{className:"section-heading"},"Metric"),l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.Field,{label:"Name"},l.a.createElement(c.Input,{type:"text",readOnly:!0,value:n.serie,width:16})),l.a.createElement(c.ValuePicker,{label:"Change Metric",icon:"exchange-alt",options:i,onChange:function(t){return a=t.value,n.serie=a,void e.onChange(r.boxes);var a},variant:"secondary",size:"sm"}),l.a.createElement(c.Field,{label:"Prefix"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.prefix=o.value,void e.onChange(r.boxes);var a,o},value:n.prefix})),l.a.createElement(c.Field,{label:"Suffix"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.suffix=o.value,void e.onChange(r.boxes);var a,o},value:n.suffix}))),l.a.createElement(c.HorizontalGroup,null,n.prefix?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.Field,{label:"Prefix size"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.prefixSize=o.value,void e.onChange(r.boxes);var a,o},value:n.prefixSize}))):null,n.suffix?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.Field,{label:"Suffix size"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.suffixSize=o.value,void e.onChange(r.boxes);var a,o},value:n.suffixSize}))):null)),l.a.createElement("div",{className:"section gf-form-group"},l.a.createElement("h5",{className:"section-heading"},"Position and Link"),l.a.createElement(c.Tooltip,{theme:"info",content:l.a.createElement("p",null,"You can easily find the coordinates if you ",l.a.createElement("code",null,"ctrl"),"+",l.a.createElement("code",null,"left click"),"anywhere on your image")},l.a.createElement(c.Icon,{name:"info-circle"})),l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.Field,{label:"X"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.xpos=o.value,void e.onChange(r.boxes);var a,o},value:n.xpos})),l.a.createElement(c.Field,{label:"Y"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.ypos=o.value,void e.onChange(r.boxes);var a,o},value:n.ypos}))),l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.Field,{label:"Angle"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.angle=o.value,void e.onChange(r.boxes);var a,o},value:n.angle})),l.a.createElement(c.Field,{label:"Link"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.url=o.value,void e.onChange(r.boxes);var a,o},value:n.url})))),l.a.createElement("div",{className:"section gf-form-group"},l.a.createElement("h5",{className:"section-heading"},"Appearance"),l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.Field,{label:"Decimal"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.decimal=o.value,void e.onChange(r.boxes);var a,o},value:n.decimal})),l.a.createElement(c.Field,{label:"Font-size"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.fontSize=o.value,void e.onChange(r.boxes);var a,o},value:n.fontSize}))),l.a.createElement(c.HorizontalGroup,null,l.a.createElement("div",{className:"width-5"},l.a.createElement(c.Field,{label:"Show Orb"},l.a.createElement(c.Switch,{value:n.hasOrb,checked:n.hasOrb,onChange:function(t){return a=n,o=t.target,a.hasOrb=o.checked,void e.onChange(r.boxes);var a,o}}))),n.hasOrb?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"width-6"},l.a.createElement(c.Field,{label:"Hide text"},l.a.createElement(c.Switch,{checked:n.orbHideText,onChange:function(t){return a=n,o=t.target,a.orbHideText=o.checked,void e.onChange(r.boxes);var a,o}}))),n.orbHideText?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"width-12"},l.a.createElement(c.Field,{label:"Orb Location"},l.a.createElement(c.Select,{options:o,onChange:function(t){return a=t,n.orbLocation=a.value,void e.onChange(r.boxes);var a},value:n.orbLocation})))),l.a.createElement("div",null,l.a.createElement(c.Field,{label:"Orb Size"},l.a.createElement(c.Input,{type:"text",value:n.orbSize,onChange:function(t){return a=n,o=t.target,a.orbSize=o.value,void e.onChange(r.boxes);var a,o}})))):null),l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.Field,{label:"Use Thresholds"},l.a.createElement(c.Switch,{onChange:function(t){return a=n,o=t.target,a.isUsingThresholds=o.checked,void e.onChange(r.boxes);var a,o},value:n.isUsingThresholds})),n.isUsingThresholds?l.a.createElement(l.a.Fragment,null,l.a.createElement(c.Tooltip,{content:l.a.createElement("p",null,"Enter 2 comma-separated numbers. 20,60 will produce: ",l.a.createElement("code",null,"value <= 20")," -> green ",l.a.createElement("br",null),l.a.createElement("code",null,"value between 20 and 60")," -> yellow ",l.a.createElement("br",null),l.a.createElement("code",null,"value >= 60")," -> red"," ")},l.a.createElement(c.Icon,{name:"info-circle"})),l.a.createElement(c.Field,{label:"Thresholds"},l.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.thresholds=o.value,void e.onChange(r.boxes);var a,o},value:n.thresholds})),l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.ColorPicker,{color:n.colorLow,onChange:function(t){return function(n,t){t.colorLow=n,e.onChange(r.boxes)}(t,n)}}),l.a.createElement(c.ColorPicker,{color:n.colorMedium,onChange:function(t){return function(n,t){t.colorMedium=n,e.onChange(r.boxes)}(t,n)}}),l.a.createElement(c.ColorPicker,{color:n.colorHigh,onChange:function(t){return function(n,t){t.colorHigh=n,e.onChange(r.boxes)}(t,n)}}))):l.a.createElement(c.Field,{label:"Color"},l.a.createElement(c.ColorPicker,{color:n.color,onChange:function(t){return function(n,t){t.color=n,e.onChange(r.boxes)}(t,n)}}))),n.isUsingThresholds?l.a.createElement(c.HorizontalGroup,null,l.a.createElement(c.Field,{label:"Blink if low"},l.a.createElement(c.Switch,{onChange:function(t){return a=n,o=t.target,a.blinkLow=o.checked,void e.onChange(r.boxes);var a,o},value:n.blinkLow})),l.a.createElement(c.Field,{label:"Blink if high"},l.a.createElement(c.Switch,{onChange:function(t){return a=n,o=t.target,a.blinkHigh=o.checked,void e.onChange(r.boxes);var a,o},value:n.blinkHigh}))):null),l.a.createElement("hr",null))})),l.a.createElement(c.Button,{variant:"primary",size:"md",icon:"plus",onClick:function(n){n.target;null==r.boxes&&(r.boxes=[]),r.boxes.push({angle:0,color:"#fff",colorHigh:"#f00",colorLow:"#0f0",colorMedium:"#fa1",decimal:0,fontSize:12,hasOrb:!1,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:!1,orbLocation:"Left",orbSize:10,prefixSize:10,serie:"A-Serie",suffixSize:10,text:"N/A",suffix:"",prefix:"",thresholds:"",blinkHigh:!0,blinkLow:!1,isUsingThresholds:!1,xpos:0,ypos:0,url:""}),e.onChange(r.boxes)}},"Add a box"))}})})).setMigrationHandler((function(e){if(null!=e.boxes&&null==e.pluginVersion){console.log("Migrating from an older version",e);var n=new T;return n.bgURL=e.bgURL,n.boxes=[],e.boxes.forEach((function(e){console.log("Found a box to upgrade:",e),n.boxes.push({angle:e.angle,color:e.color,colorHigh:e.colorHigh,colorLow:e.colorLow,colorMedium:e.colorMedium,decimal:e.decimal,fontSize:e.fontsize,hasOrb:e.hasOrb,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:e.orbHideText,orbLocation:e.orbLocation,orbSize:e.orbSize,prefixSize:e.prefixSize,serie:e.serie,suffixSize:e.suffixSize,text:e.text,suffix:e.suffix,prefix:e.prefix,thresholds:e.thresholds,blinkHigh:e.blinkHigh,blinkLow:e.blinkLow,isUsingThresholds:e.usingThresholds,xpos:e.xpos,ypos:e.ypos,url:e.URL})})),n}return console.log("MigHandler: Nothing to upgrade"),e.options}))}])}));
//# sourceMappingURL=module.js.map