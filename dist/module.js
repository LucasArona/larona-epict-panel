define(["react","@grafana/ui","emotion","@grafana/data","@grafana/runtime"],(function(e,n,t,a,r){return function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(n){return e[n]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=5)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n){e.exports=t},function(e,n){e.exports=a},function(e,n){e.exports=r},function(e,n,t){"use strict";t.r(n);var a=function(){return(a=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function r(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}var o=t(3),l=t(0),i=t.n(l),c=t(2),s=t(1),u=t(4);function f(e,n){var t,a,r,o="N/A",l=null===(t=e)||void 0===t?void 0:t.values.length;if(l){for(;l--&&null==(null===(a=e)||void 0===a?void 0:a.values.get(l)););-1!==l&&(o=null===(r=e)||void 0===r?void 0:r.values.get(l).toFixed(n).toString())}return o}var d,b,h,p,m,g,x,v,E,y,k,O,C,z,w,S,j,L,H,F=function(e){e.ctrlKey&&alert("X:"+e.nativeEvent.offsetX+" Y:"+e.nativeEvent.offsetY)},T=Object(s.stylesFactory)((function(){return{wrapper:Object(c.css)(k||(k=r(["\n      display: flex;\n      justify-content: center;\n    "],["\n      display: flex;\n      justify-content: center;\n    "]))),imgWrapper:Object(c.css)(O||(O=r(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),box:Object(c.css)(C||(C=r(["\n      position: absolute;\n    "],["\n      position: absolute;\n    "]))),boxLink:Object(c.css)(z||(z=r(["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "],["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "]))),orbDefaults:Object(c.css)(w||(w=r(["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "],["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "]))),blink:Object(c.css)(S||(S=r(["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "],["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "]))),alignVertically:Object(c.css)(j||(j=r(["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "],["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "]))),boxPrefix:Object(c.css)(L||(L=r(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "]))),boxSuffix:Object(c.css)(H||(H=r(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "])))}})),N=function(){};t.d(n,"plugin",(function(){return P}));var P=new o.PanelPlugin((function(e){var n=e.options,t=e.data,a=(e.width,e.height,Object(u.getTemplateSrv)().replace(n.bgURL)),l=n.boxes,s=T();return i.a.createElement("div",{className:Object(c.cx)(s.wrapper)},i.a.createElement("div",{className:Object(c.cx)(s.imgWrapper),id:"img-wrapper"},i.a.createElement("img",{srcSet:a,onClick:function(e){return F(e)}}),l.map((function(e,n){return i.a.createElement("span",{className:Object(c.cx)(s.box,Object(c.css)(d||(d=r(["\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "],["\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "])),e.ypos,e.xpos,O(e),e.angle))},i.a.createElement("a",{href:e.url?Object(u.getTemplateSrv)().replace(e.url):"#",className:Object(c.cx)(s.boxLink,e.url?Object(c.css)(b||(b=r(["\n                      cursor: pointer;\n                    "],["\n                      cursor: pointer;\n                    "]))):Object(c.css)(h||(h=r(["\n                      cursor: default;\n                    "],["\n                      cursor: default;\n                    "]))))},e.hasOrb&&e.orbHideText||e.hasOrb&&!e.orbHideText&&"Top"===e.orbLocation?i.a.createElement("span",{className:Object(c.cx)(k(e)?s.blink:"",s.orbDefaults,Object(c.css)(p||(p=r(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null,e.hasOrb&&e.orbHideText?null:i.a.createElement("div",{className:Object(c.cx)(Object(c.css)(m||(m=r(["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "],["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "])),e.fontSize))},e.hasOrb&&"Left"===e.orbLocation?i.a.createElement("span",{className:Object(c.cx)(k(e)?s.blink:"",s.orbDefaults,s.alignVertically,Object(c.css)(g||(g=r(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null,e.prefix?i.a.createElement("span",{className:Object(c.cx)(s.alignVertically,s.boxPrefix,Object(c.css)(x||(x=r(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.prefixSize)),title:C(e)},e.prefix):null,i.a.createElement("span",{className:Object(c.cx)(k(e)?s.blink:"",s.alignVertically)},z(e)),e.suffix?i.a.createElement("span",{className:Object(c.cx)(k(e)?s.blink:"",s.alignVertically,s.boxSuffix,Object(c.css)(v||(v=r(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.suffixSize)),title:C(e)},e.suffix):null,e.hasOrb&&"Right"===e.orbLocation?i.a.createElement("span",{className:Object(c.cx)(k(e)?s.blink:"",s.orbDefaults,s.alignVertically,Object(c.css)(E||(E=r(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null),e.hasOrb&&!e.orbHideText&&"Bottom"===e.orbLocation?i.a.createElement("span",{className:Object(c.cx)(k(e)?s.blink:"",s.orbDefaults,Object(c.css)(y||(y=r(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,O(e))),title:C(e)}):null))}))));function k(e){if(e.isUsingThresholds&&e.thresholds&&(e.blinkHigh||e.blinkLow)){var n=z(e),t=+e.thresholds.split(",")[0],a=+e.thresholds.split(",")[1];if(e.blinkHigh&&+n>=a)return!0;if(e.blinkLow&&+n<=t)return!0}return!1}function O(e){var n=z(e);if(e.isUsingThresholds&&e.thresholds){var t=+e.thresholds.split(",")[0];return+n>=+e.thresholds.split(",")[1]?e.colorHigh:+n<=t?e.colorLow:e.colorMedium}return e.color}function C(e){var n,t;return null!=(t=null!=(n=e.prefix)?n:"".concat(w(e.serie,5)))?t:"".concat(e.suffix)}function z(e){return w(e.serie,e.decimal)}function w(e,n){var a,r=void 0;if(t.series.every((function(t){var a=t.fields.filter((function(e){return e.type===o.FieldType.number})).find((function(n){var a=Object(o.getFieldDisplayName)(n,t);return(void 0===t.name||t.name===a?a:t.name+" ("+a+")")===e}));return null==a||(r=f(a,n),!1)})),void 0===r){var l=null===(a=t.series.find((function(n){return n.name===e})))||void 0===a?void 0:a.fields.find((function(e){return"number"===e.type}));r=f(l,n)}return void 0===r&&(r="N/A"),r}})).setPanelOptions((function(e){e.addTextInput({name:"Background URL",path:"bgURL"}).addCustomEditor({path:"boxes",name:"Boxes definitions",id:"boxesDefinitions",defaultValue:null,editor:function(e){var n=e.context,t=n.data,r=n.options;null==r.boxes&&(r.boxes=[]);var l=[{label:"Top",value:"Top"},{label:"Bottom",value:"Bottom"},{label:"Left",value:"Left"},{label:"Right",value:"Right"}],c=[];return t.forEach((function(e){e.fields.filter((function(e){return e.type===o.FieldType.number})).forEach((function(n){if(void 0!==n){var t=Object(o.getFieldDisplayName)(n,e),a=void 0===e.name||e.name===t?t:e.name+" ("+t+")";c.push({value:a,label:a})}}))})),i.a.createElement("div",{className:"section gf-form-group"},i.a.createElement("h4",{className:"section-heading"},"Boxes definitions"),r.boxes.map((function(n,t){return i.a.createElement("div",null,i.a.createElement("h5",null,"Box #",t),i.a.createElement("div",{className:"section gf-form-group"},i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.IconButton,{name:"trash-alt",size:"xl",surface:"panel",onClick:function(n){return function(n,t){n.target;delete r.boxes[t],r.boxes.splice(t,1),e.onChange(r.boxes)}(n,t)}}),i.a.createElement(s.IconButton,{name:"copy",size:"xl",surface:"panel",onClick:function(t){return function(n,t){n.target;r.boxes.push(a({},t)),e.onChange(r.boxes)}(t,n)}}))),i.a.createElement("div",{className:"section gf-form-group"},i.a.createElement("h5",{className:"section-heading"},"Metric"),i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.Field,{label:"Name"},i.a.createElement(s.Input,{type:"text",readOnly:!0,value:n.serie,width:16})),i.a.createElement(s.ValuePicker,{label:"Change Metric",icon:"exchange-alt",options:c,onChange:function(t){return a=t.value,n.serie=a,void e.onChange(r.boxes);var a},variant:"secondary",size:"sm"}),i.a.createElement(s.Field,{label:"Prefix"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.prefix=o.value,void e.onChange(r.boxes);var a,o},value:n.prefix})),i.a.createElement(s.Field,{label:"Suffix"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.suffix=o.value,void e.onChange(r.boxes);var a,o},value:n.suffix}))),i.a.createElement(s.HorizontalGroup,null,n.prefix?i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Field,{label:"Prefix size"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.prefixSize=o.value,void e.onChange(r.boxes);var a,o},value:n.prefixSize}))):null,n.suffix?i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Field,{label:"Suffix size"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.suffixSize=o.value,void e.onChange(r.boxes);var a,o},value:n.suffixSize}))):null)),i.a.createElement("div",{className:"section gf-form-group"},i.a.createElement("h5",{className:"section-heading"},"Position and Link"),i.a.createElement(s.Tooltip,{theme:"info",content:i.a.createElement("p",null,"You can easily find the coordinates if you ",i.a.createElement("code",null,"ctrl"),"+",i.a.createElement("code",null,"left click"),"anywhere on your image")},i.a.createElement(s.Icon,{name:"info-circle"})),i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.Field,{label:"X"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.xpos=o.value,void e.onChange(r.boxes);var a,o},value:n.xpos})),i.a.createElement(s.Field,{label:"Y"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.ypos=o.value,void e.onChange(r.boxes);var a,o},value:n.ypos}))),i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.Field,{label:"Angle"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.angle=o.value,void e.onChange(r.boxes);var a,o},value:n.angle})),i.a.createElement(s.Field,{label:"Link"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.url=o.value,void e.onChange(r.boxes);var a,o},value:n.url})))),i.a.createElement("div",{className:"section gf-form-group"},i.a.createElement("h5",{className:"section-heading"},"Appearance"),i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.Field,{label:"Decimal"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.decimal=o.value,void e.onChange(r.boxes);var a,o},value:n.decimal})),i.a.createElement(s.Field,{label:"Font-size"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.fontSize=o.value,void e.onChange(r.boxes);var a,o},value:n.fontSize}))),i.a.createElement(s.HorizontalGroup,null,i.a.createElement("div",{className:"width-5"},i.a.createElement(s.Field,{label:"Show Orb"},i.a.createElement(s.Switch,{value:n.hasOrb,checked:n.hasOrb,onChange:function(t){return a=n,o=t.target,a.hasOrb=o.checked,void e.onChange(r.boxes);var a,o}}))),n.hasOrb?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"width-6"},i.a.createElement(s.Field,{label:"Hide text"},i.a.createElement(s.Switch,{checked:n.orbHideText,onChange:function(t){return a=n,o=t.target,a.orbHideText=o.checked,void e.onChange(r.boxes);var a,o}}))),n.orbHideText?null:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"width-12"},i.a.createElement(s.Field,{label:"Orb Location"},i.a.createElement(s.Select,{options:l,onChange:function(t){return a=t,n.orbLocation=a.value,void e.onChange(r.boxes);var a},value:n.orbLocation})))),i.a.createElement("div",null,i.a.createElement(s.Field,{label:"Orb Size"},i.a.createElement(s.Input,{type:"text",value:n.orbSize,onChange:function(t){return a=n,o=t.target,a.orbSize=o.value,void e.onChange(r.boxes);var a,o}})))):null),i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.Field,{label:"Use Thresholds"},i.a.createElement(s.Switch,{onChange:function(t){return a=n,o=t.target,a.isUsingThresholds=o.checked,void e.onChange(r.boxes);var a,o},value:n.isUsingThresholds})),n.isUsingThresholds?i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Tooltip,{content:i.a.createElement("p",null,"Enter 2 comma-separated numbers. 20,60 will produce: ",i.a.createElement("code",null,"value <= 20")," -> green ",i.a.createElement("br",null),i.a.createElement("code",null,"value between 20 and 60")," -> yellow ",i.a.createElement("br",null),i.a.createElement("code",null,"value >= 60")," -> red"," ")},i.a.createElement(s.Icon,{name:"info-circle"})),i.a.createElement(s.Field,{label:"Thresholds"},i.a.createElement(s.Input,{type:"text",onChange:function(t){return a=n,o=t.target,a.thresholds=o.value,void e.onChange(r.boxes);var a,o},value:n.thresholds})),i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.ColorPicker,{color:n.colorLow,onChange:function(t){return function(n,t){t.colorLow=n,e.onChange(r.boxes)}(t,n)}}),i.a.createElement(s.ColorPicker,{color:n.colorMedium,onChange:function(t){return function(n,t){t.colorMedium=n,e.onChange(r.boxes)}(t,n)}}),i.a.createElement(s.ColorPicker,{color:n.colorHigh,onChange:function(t){return function(n,t){t.colorHigh=n,e.onChange(r.boxes)}(t,n)}}))):i.a.createElement(s.Field,{label:"Color"},i.a.createElement(s.ColorPicker,{color:n.color,onChange:function(t){return function(n,t){t.color=n,e.onChange(r.boxes)}(t,n)}}))),n.isUsingThresholds?i.a.createElement(s.HorizontalGroup,null,i.a.createElement(s.Field,{label:"Blink if low"},i.a.createElement(s.Switch,{onChange:function(t){return a=n,o=t.target,a.blinkLow=o.checked,void e.onChange(r.boxes);var a,o},value:n.blinkLow})),i.a.createElement(s.Field,{label:"Blink if high"},i.a.createElement(s.Switch,{onChange:function(t){return a=n,o=t.target,a.blinkHigh=o.checked,void e.onChange(r.boxes);var a,o},value:n.blinkHigh}))):null),i.a.createElement("hr",null))})),i.a.createElement(s.Button,{variant:"primary",size:"md",icon:"plus",onClick:function(n){n.target;null==r.boxes&&(r.boxes=[]),r.boxes.push({angle:0,color:"#fff",colorHigh:"#f00",colorLow:"#0f0",colorMedium:"#fa1",decimal:0,fontSize:12,hasOrb:!1,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:!1,orbLocation:"Left",orbSize:10,prefixSize:10,serie:"A-Serie",suffixSize:10,text:"N/A",suffix:"",prefix:"",thresholds:"",blinkHigh:!0,blinkLow:!1,isUsingThresholds:!1,xpos:0,ypos:0,url:""}),e.onChange(r.boxes)}},"Add a box"))}})})).setMigrationHandler((function(e){if(null!=e.boxes&&null==e.pluginVersion){console.log("Migrating from an older version",e);var n=new N;return n.bgURL=e.bgURL,n.boxes=[],e.boxes.forEach((function(e){console.log("Found a box to upgrade:",e),n.boxes.push({angle:e.angle,color:e.color,colorHigh:e.colorHigh,colorLow:e.colorLow,colorMedium:e.colorMedium,decimal:e.decimal,fontSize:e.fontsize,hasOrb:e.hasOrb,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:e.orbHideText,orbLocation:e.orbLocation,orbSize:e.orbSize,prefixSize:e.prefixSize,serie:e.serie,suffixSize:e.suffixSize,text:e.text,suffix:e.suffix,prefix:e.prefix,thresholds:e.thresholds,blinkHigh:e.blinkHigh,blinkLow:e.blinkLow,isUsingThresholds:e.usingThresholds,xpos:e.xpos,ypos:e.ypos,url:e.URL})})),n}return console.log("MigHandler: Nothing to upgrade"),e.options}))}])}));
//# sourceMappingURL=module.js.map