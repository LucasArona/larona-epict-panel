define(["react","@grafana/ui","emotion","tslib","@grafana/data","@grafana/runtime"],(function(e,t,n,l,a,o){return function(e){var t={};function n(l){if(t[l])return t[l].exports;var a=t[l]={i:l,l:!1,exports:{}};return e[l].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(l,a,function(t){return e[t]}.bind(null,a));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=6)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=l},function(e,t){e.exports=a},function(e,t){e.exports=o},function(e,t,n){"use strict";n.r(t);var l=n(4),a=n(3),o=n(0),r=n.n(o),i=n(2),c=n(1),s=n(5);function u(e,t){var n="N/A",l=null==e?void 0:e.values.length;if(l){for(;l--&&null==(null==e?void 0:e.values.get(l)););-1!==l&&(n=null==e?void 0:e.values.get(l).toFixed(t).toString())}return n}var b,m,p,h,f,d,g,x,v,y,E,O,k,j,S,w,T,z,H,_,C,F,L,N,P,I,D,M,U,V=function(e){e.ctrlKey&&alert("X:"+e.nativeEvent.offsetX+" Y:"+e.nativeEvent.offsetY)},W=function(){return null!=l.urlUtil.getUrlSearchParams().editPanel},G=Object(c.stylesFactory)((function(){return{wrapper:Object(i.css)(C||(C=Object(a.__makeTemplateObject)(["\n      display: flex;\n      justify-content: center;\n      height: 100%;\n    "],["\n      display: flex;\n      justify-content: center;\n      height: 100%;\n    "]))),imgWrapper:Object(i.css)(F||(F=Object(a.__makeTemplateObject)(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),box:Object(i.css)(L||(L=Object(a.__makeTemplateObject)(["\n      position: absolute;\n    "],["\n      position: absolute;\n    "]))),boxLink:Object(i.css)(N||(N=Object(a.__makeTemplateObject)(["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "],["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "]))),orbDefaults:Object(i.css)(P||(P=Object(a.__makeTemplateObject)(["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "],["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "]))),blink:Object(i.css)(I||(I=Object(a.__makeTemplateObject)(["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "],["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "]))),alignVertically:Object(i.css)(D||(D=Object(a.__makeTemplateObject)(["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "],["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "]))),boxPrefix:Object(i.css)(M||(M=Object(a.__makeTemplateObject)(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "]))),boxSuffix:Object(i.css)(U||(U=Object(a.__makeTemplateObject)(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "])))}})),B=function(){},A=[{label:"None",value:"",width:32,height:32,factor:1},{label:"Static Text",value:"text",width:32,height:32,factor:1},{label:"Custom Symbol",value:"custom",width:32,height:32,factor:1},{label:"Arrow 1",value:"public/plugins/larona-epict-panel/symbols/Arrow1.svg",width:32,height:32,factor:1},{label:"Arrow 2",value:"public/plugins/larona-epict-panel/symbols/Arrow2.svg",width:32,height:32,factor:1},{label:"Flat Vessel 1",value:"public/plugins/larona-epict-panel/symbols/FlatVessel1.svg",width:16,height:32,factor:8},{label:"Line 1",value:"public/plugins/larona-epict-panel/symbols/Line1.svg",width:32,height:32,factor:1},{label:"Mixer 1",value:"public/plugins/larona-epict-panel/symbols/Mixer1.svg",width:32,height:32,factor:2},{label:"Motor 1",value:"public/plugins/larona-epict-panel/symbols/Motor1.svg",width:32,height:32,factor:2},{label:"Pipe 1",value:"public/plugins/larona-epict-panel/symbols/Pipe1.svg",width:32,height:32,factor:1},{label:"Pipe 2",value:"public/plugins/larona-epict-panel/symbols/Pipe2.svg",width:32,height:32,factor:2},{label:"Pipe 3",value:"public/plugins/larona-epict-panel/symbols/Pipe3.svg",width:32,height:32,factor:2},{label:"Pump 1",value:"public/plugins/larona-epict-panel/symbols/Pump1.svg",width:32,height:32,factor:2},{label:"Tank 1",value:"public/plugins/larona-epict-panel/symbols/Tank1.svg",width:16,height:32,factor:8},{label:"Tank 2",value:"public/plugins/larona-epict-panel/symbols/Tank2.svg",width:16,height:32,factor:8},{label:"Tank 3",value:"public/plugins/larona-epict-panel/symbols/Tank3.svg",width:16,height:32,factor:8},{label:"Valve 1",value:"public/plugins/larona-epict-panel/symbols/Valve1.svg",width:32,height:16,factor:2},{label:"Valve 2",value:"public/plugins/larona-epict-panel/symbols/Valve2.svg",width:32,height:32,factor:2}],R=function(e){e.item,e.value;var t=e.onChange,n=e.context,o=n.data,i=n.options;null==i.boxes&&(i.boxes=[]);var u=function(e,n){n.serie=e,t(i.boxes)},b=function(e,n){var l=e.target;n.prefix=l.value,t(i.boxes)},m=function(e,n){var l=e.target;n.prefixSize=l.value,t(i.boxes)},p=function(e,n){var l=e.target;n.suffix=l.value,t(i.boxes)},h=function(e,n){var l=e.target;n.suffixSize=l.value,t(i.boxes)},f=function(e,n){var l=e.target;n.xpos=l.value,t(i.boxes)},d=function(e,n){var l=e.target;n.ypos=l.value,t(i.boxes)},g=function(e,n){var l=e.target;n.angle=l.value,t(i.boxes)},x=function(e,n){var l=e.target;n.url=l.value,t(i.boxes)},v=function(e,n){var l=e.target;n.decimal=l.value,t(i.boxes)},y=function(e,n){var l=e.target;n.fontSize=l.value,t(i.boxes)},E=function(e,n){var l=e.target;n.hasOrb=l.checked,t(i.boxes)},O=function(e,n){var l=e.target;n.orbHideText=l.checked,t(i.boxes)},k=function(e,n){n.orbLocation=e.value,t(i.boxes)},j=function(e,n){var l=e.target;n.symbolHideText=l.checked,t(i.boxes)},S=function(e,n){var l=e.target;n.colorSymbol=l.checked,t(i.boxes)},w=function(e,n){n.symbol=e.value,n.symbolDefWidth=e.width,n.symbolWidth=e.width*e.factor,n.symbolDefHeight=e.height,n.symbolHeight=e.height*e.factor,t(i.boxes)},T=function(e,n){var l=e.target;n.symbolWidth=l.value,t(i.boxes)},z=function(e,n){var l=e.target;n.symbolHeight=l.value,t(i.boxes)},H=function(e,n){var l=e.target;n.customSymbol=l.value,t(i.boxes)},_=function(e,n){var l=e.target;n.isUsingThresholds=l.checked,t(i.boxes)},C=function(e,n){var l=e.target;n.thresholds=l.value,t(i.boxes)},F=function(e,n){n.color=e,t(i.boxes)},L=function(e,n){n.colorLow=e,t(i.boxes)},N=function(e,n){n.colorMedium=e,t(i.boxes)},P=function(e,n){n.colorHigh=e,t(i.boxes)},I=function(e,n){var l=e.target;n.blinkHigh=l.checked,t(i.boxes)},D=function(e,n){var l=e.target;n.blinkLow=l.checked,t(i.boxes)},M=function(e,n){var l=e.target;n.orbSize=l.value,t(i.boxes)},U=[{label:"Top",value:"Top"},{label:"Bottom",value:"Bottom"},{label:"Left",value:"Left"},{label:"Right",value:"Right"}],V=[];o.forEach((function(e){e.fields.filter((function(e){return e.type===l.FieldType.number})).forEach((function(t){if(void 0!==t){var n=Object(l.getFieldDisplayName)(t,e),a=void 0===e.name||e.name===n?n:e.name+" ("+n+")";V.push({value:a,label:a})}}))}));var W=i.boxes.findIndex((function(e){return!0===e.selected})),G=function(e,n){return r.a.createElement("div",null,r.a.createElement("h5",null,"Box #",n),r.a.createElement("div",{className:"section gf-form-group"},r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.IconButton,{name:"trash-alt",size:"xl",surface:"panel",onClick:function(e){return function(e,n){e.target;delete i.boxes[n],i.boxes.splice(n,1),t(i.boxes)}(e,n)}}),r.a.createElement(c.IconButton,{name:"copy",size:"xl",surface:"panel",onClick:function(n){return function(e,n){e.target;i.boxes.push(Object(a.__assign)({},n)),t(i.boxes)}(n,e)}}))),r.a.createElement(c.CollapsableSection,{label:"Metric",isOpen:!0},r.a.createElement("div",{className:"section gf-form-group"},r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Name"},r.a.createElement(c.Input,{type:"text",readOnly:!0,value:e.serie,width:16})),r.a.createElement(c.ValuePicker,{label:"Change Metric",icon:"exchange-alt",options:V,onChange:function(t){return u(t.value,e)},variant:"secondary",size:"sm"}),r.a.createElement(c.Field,{label:"Prefix"},r.a.createElement(c.Input,{type:"text",onChange:function(t){return b(t,e)},value:e.prefix})),r.a.createElement(c.Field,{label:"Suffix"},r.a.createElement(c.Input,{type:"text",onChange:function(t){return p(t,e)},value:e.suffix}))),r.a.createElement(c.HorizontalGroup,null,e.prefix?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Field,{label:"Prefix size"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return m(t,e)},value:e.prefixSize}))):null,e.suffix?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Field,{label:"Suffix size"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return h(t,e)},value:e.suffixSize}))):null))),r.a.createElement(c.CollapsableSection,{label:"Position and Link",isOpen:!0},r.a.createElement("div",{className:"section gf-form-group"},r.a.createElement("h5",{className:"section-heading"},"Position and Link"),r.a.createElement(c.Tooltip,{theme:"info",content:r.a.createElement("p",null,"You can easily find the coordinates if you ",r.a.createElement("code",null,"ctrl"),"+",r.a.createElement("code",null,"left click"),"anywhere on your image")},r.a.createElement(c.Icon,{name:"info-circle"})),r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"X"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return f(t,e)},value:e.xpos})),r.a.createElement(c.Field,{label:"Y"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return d(t,e)},value:e.ypos}))),r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Angle"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return g(t,e)},value:e.angle})),r.a.createElement(c.Field,{label:"Link"},r.a.createElement(c.Input,{type:"text",onChange:function(t){return x(t,e)},value:e.url}))))),r.a.createElement(c.CollapsableSection,{label:"Symbol Library",isOpen:!1},r.a.createElement("div",{className:"section gf-form-group"},r.a.createElement(c.HorizontalGroup,null,r.a.createElement("div",{className:"width-12"},r.a.createElement(c.Field,{label:"Symbol"},r.a.createElement(c.Select,{options:A,onChange:function(t){return w(t,e)},value:e.symbol}))),""!==e.symbol&&"custom"!==e.symbol&&"text"!==e.symbol?r.a.createElement("img",{srcSet:Object(s.getTemplateSrv)().replace(e.symbol),width:e.symbolDefWidth,height:e.symbolDefHeight}):null),"custom"===e.symbol?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Custom symbol url"},r.a.createElement(c.Input,{type:"text",onChange:function(t){return H(t,e)},value:e.customSymbol})))):null,"text"===e.symbol?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Static text"},r.a.createElement(c.Input,{type:"text",onChange:function(t){return H(t,e)},value:e.customSymbol})))):null,""!==e.symbol?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Symbol width"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return T(t,e)},value:e.symbolWidth})),r.a.createElement(c.Field,{label:"Symbol height"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return z(t,e)},value:e.symbolHeight})))):null,r.a.createElement(c.HorizontalGroup,null,r.a.createElement("div",{className:"width-8"},r.a.createElement(c.Field,{label:"Hide value"},r.a.createElement(c.Switch,{value:e.symbolHideText,checked:e.symbolHideText,onChange:function(t){return j(t,e)}}))),r.a.createElement("div",{className:"width-8"},r.a.createElement(c.Field,{label:"Colorize symbol"},r.a.createElement(c.Switch,{value:e.colorSymbol,checked:e.colorSymbol,onChange:function(t){return S(t,e)}})))))),r.a.createElement(c.CollapsableSection,{label:"Orb",isOpen:!1},r.a.createElement("div",{className:"section gf-form-group"},r.a.createElement(c.HorizontalGroup,null,r.a.createElement("div",{className:"width-5"},r.a.createElement(c.Field,{label:"Show Orb"},r.a.createElement(c.Switch,{value:e.hasOrb,checked:e.hasOrb,onChange:function(t){return E(t,e)}}))),e.hasOrb?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"width-6"},r.a.createElement(c.Field,{label:"Hide text"},r.a.createElement(c.Switch,{checked:e.orbHideText,onChange:function(t){return O(t,e)}}))),e.orbHideText?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"width-12"},r.a.createElement(c.Field,{label:"Orb Location"},r.a.createElement(c.Select,{options:U,onChange:function(t){return k(t,e)},value:e.orbLocation})))),r.a.createElement("div",null,r.a.createElement(c.Field,{label:"Orb Size"},r.a.createElement(c.Input,{type:"number",value:e.orbSize,onChange:function(t){return M(t,e)}})))):null))),r.a.createElement(c.CollapsableSection,{label:"Font-size, decimal, thresholds",isOpen:!1},r.a.createElement("div",{className:"section gf-form-group"},r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Decimal"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return v(t,e)},value:e.decimal})),r.a.createElement(c.Field,{label:"Font-size"},r.a.createElement(c.Input,{type:"number",onChange:function(t){return y(t,e)},value:e.fontSize}))),r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Use Thresholds"},r.a.createElement(c.Switch,{onChange:function(t){return _(t,e)},value:e.isUsingThresholds})),e.isUsingThresholds?r.a.createElement(r.a.Fragment,null,r.a.createElement(c.Tooltip,{content:r.a.createElement("p",null,"Enter 2 comma-separated numbers. 20,60 will produce: ",r.a.createElement("code",null,"value <= 20")," -> green"," ",r.a.createElement("br",null),r.a.createElement("code",null,"value between 20 and 60")," -> yellow ",r.a.createElement("br",null),r.a.createElement("code",null,"value >= 60")," -> red"," ")},r.a.createElement(c.Icon,{name:"info-circle"})),r.a.createElement(c.Field,{label:"Thresholds"},r.a.createElement(c.Input,{type:"text",onChange:function(t){return C(t,e)},value:e.thresholds})),r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.ColorPicker,{color:e.colorLow,onChange:function(t){return L(t,e)}}),r.a.createElement(c.ColorPicker,{color:e.colorMedium,onChange:function(t){return N(t,e)}}),r.a.createElement(c.ColorPicker,{color:e.colorHigh,onChange:function(t){return P(t,e)}}))):r.a.createElement(c.Field,{label:"Color"},r.a.createElement(c.ColorPicker,{color:e.color,onChange:function(t){return F(t,e)}}))),e.isUsingThresholds?r.a.createElement(c.HorizontalGroup,null,r.a.createElement(c.Field,{label:"Blink if low"},r.a.createElement(c.Switch,{onChange:function(t){return D(t,e)},value:e.blinkLow})),r.a.createElement(c.Field,{label:"Blink if high"},r.a.createElement(c.Switch,{onChange:function(t){return I(t,e)},value:e.blinkHigh}))):null)),r.a.createElement("hr",null))};return r.a.createElement("div",{className:"section gf-form-group"},-1!==W?r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"section-heading"},"Selected Box:"),G(i.boxes[W],W),r.a.createElement("hr",null),r.a.createElement("h4",{className:"section-heading"},"All defined boxes:")):null,i.boxes.map((function(e,t){return G(e,t)})),r.a.createElement(c.Button,{variant:"primary",size:"md",icon:"plus",onClick:function(e){e.target;null==i.boxes&&(i.boxes=[]),i.boxes.push({angle:0,color:"#fff",colorHigh:"#f00",colorLow:"#0f0",colorMedium:"#fa1",decimal:0,fontSize:12,hasOrb:!1,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:!1,orbLocation:"Left",orbSize:10,prefixSize:10,serie:"A-Serie",suffixSize:10,text:"N/A",suffix:"",prefix:"",thresholds:"",blinkHigh:!0,blinkLow:!1,isUsingThresholds:!1,xpos:0,ypos:0,url:"",symbolHideText:!1,symbol:"",symbolWidth:32,symbolHeight:32,symbolDefHeight:32,symbolDefWidth:32,colorSymbol:!1,customSymbol:"",selected:!1}),t(i.boxes)}},"Add a box"))};n.d(t,"plugin",(function(){return Y}));var Y=new l.PanelPlugin((function(e){var t=e.options,n=e.data,o=e.onOptionsChange,c=(e.width,e.height,Object(s.getTemplateSrv)().replace(t.bgURL)),C=t.boxes,F=function(){U()},L=G();return r.a.createElement("div",{className:Object(i.cx)(L.wrapper),onMouseMove:function(e){return function(e){if(m&&W()){var n=e.clientX-f,l=e.clientY-d;b.xpos=p+n,b.ypos=h+l,o(t)}}(e)},onClick:function(e){return function(e){W()&&0===e.button&&!g&&(M(),o(t));g=!1}(e)}},r.a.createElement("div",{className:Object(i.cx)(L.imgWrapper),id:"img-wrapper"},r.a.createElement("img",{srcSet:c,onClick:function(e){return V(e)}}),C.map((function(e,n){return r.a.createElement("span",{onMouseDown:function(t){return function(e,t){W()&&0===e.button&&(b=t,p=1*t.xpos,h=1*t.ypos,f=1*e.clientX,d=1*e.clientY,m=!0,$(document).one("mouseup",F.bind(F)),e.preventDefault())}(t,e)},onClick:function(n){return function(e,n){W()&&0===e.button&&(g=!0,M(),n.selected=!0,o(t))}(n,e)},key:n,className:Object(i.cx)(L.box,Object(i.css)(x||(x=Object(a.__makeTemplateObject)(["\n                ","\n                ","\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "],["\n                ","\n                ","\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "])),W()&&e.selected?"border-radius: 15px;":null,W()&&e.selected?"border: dotted;":null,e.ypos,e.xpos,P(e),e.angle))},r.a.createElement("a",Object(a.__assign)({},e.url&&!W()?{href:Object(s.getTemplateSrv)().replace(e.url)}:null,{className:Object(i.cx)(L.boxLink,e.url?Object(i.css)(v||(v=Object(a.__makeTemplateObject)(["\n                      cursor: pointer;\n                    "],["\n                      cursor: pointer;\n                    "]))):Object(i.css)(y||(y=Object(a.__makeTemplateObject)(["\n                      cursor: default;\n                    "],["\n                      cursor: default;\n                    "]))))}),e.hasOrb&&e.orbHideText||e.hasOrb&&!e.orbHideText&&"Top"===e.orbLocation?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",L.orbDefaults,Object(i.css)(E||(E=Object(a.__makeTemplateObject)(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,P(e))),title:I(e)}):null,e.hasOrb&&e.orbHideText?null:r.a.createElement("div",{className:Object(i.cx)(Object(i.css)(O||(O=Object(a.__makeTemplateObject)(["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "],["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "])),e.fontSize))},""===e.symbol||e.colorSymbol||"text"===e.symbol||"custom"===e.symbol?null:r.a.createElement("img",{srcSet:Object(s.getTemplateSrv)().replace(e.symbol),width:e.symbolWidth,height:e.symbolHeight}),""!==e.symbol&&e.colorSymbol&&"text"!==e.symbol&&"custom"!==e.symbol?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",Object(i.css)(k||(k=Object(a.__makeTemplateObject)(["\n                          height: ","px;\n                          width: ","px;\n                          background: ",";\n                          mask-size: cover;\n                          display: inline-block;\n                          mask: url(",");\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background: ",";\n                          mask-size: cover;\n                          display: inline-block;\n                          mask: url(",");\n                        "])),e.symbolHeight,e.symbolWidth,P(e),Object(s.getTemplateSrv)().replace(e.symbol)))}):null,"custom"!==e.symbol||e.colorSymbol||""===e.customSymbol?null:r.a.createElement("img",{srcSet:Object(s.getTemplateSrv)().replace(e.customSymbol),width:e.symbolWidth,height:e.symbolHeight}),"custom"===e.symbol&&e.colorSymbol&&""!==e.customSymbol?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",Object(i.css)(j||(j=Object(a.__makeTemplateObject)(["\n                          height: ","px;\n                          width: ","px;\n                          background: ",";\n                          mask-size: cover;\n                          display: inline-block;\n                          mask: url(",");\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background: ",";\n                          mask-size: cover;\n                          display: inline-block;\n                          mask: url(",");\n                        "])),e.symbolHeight,e.symbolWidth,P(e),Object(s.getTemplateSrv)().replace(e.customSymbol)))}):null,"text"===e.symbol?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",L.alignVertically,Object(i.css)(S||(S=Object(a.__makeTemplateObject)(["\n                          height: ","px;\n                          width: ","px;\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                        "])),e.symbolHeight,e.symbolWidth))},e.customSymbol):null,e.hasOrb&&"Left"===e.orbLocation?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",L.orbDefaults,L.alignVertically,Object(i.css)(w||(w=Object(a.__makeTemplateObject)(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,P(e))),title:I(e)}):null,e.prefix?r.a.createElement("span",{className:Object(i.cx)(L.alignVertically,L.boxPrefix,Object(i.css)(T||(T=Object(a.__makeTemplateObject)(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.prefixSize)),title:I(e)},e.prefix):null,e.symbolHideText?null:r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",L.alignVertically)},D(e)),!e.symbolHideText&&e.suffix?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",L.alignVertically,L.boxSuffix,Object(i.css)(z||(z=Object(a.__makeTemplateObject)(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.suffixSize)),title:I(e)},e.suffix):null,e.hasOrb&&"Right"===e.orbLocation?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",L.orbDefaults,L.alignVertically,Object(i.css)(H||(H=Object(a.__makeTemplateObject)(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,P(e))),title:I(e)}):null),e.hasOrb&&!e.orbHideText&&"Bottom"===e.orbLocation?r.a.createElement("span",{className:Object(i.cx)(N(e)?L.blink:"",L.orbDefaults,Object(i.css)(_||(_=Object(a.__makeTemplateObject)(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,P(e))),title:I(e)}):null))}))));function N(e){if(e.isUsingThresholds&&e.thresholds&&(e.blinkHigh||e.blinkLow)){var t=D(e),n=+e.thresholds.split(",")[0],l=+e.thresholds.split(",")[1];if(e.blinkHigh&&+t>=l)return!0;if(e.blinkLow&&+t<=n)return!0}return!1}function P(e){var t=D(e);if(e.isUsingThresholds&&e.thresholds){var n=+e.thresholds.split(",")[0];return+t>=+e.thresholds.split(",")[1]?e.colorHigh:+t<=n?e.colorLow:e.colorMedium}return e.color}function I(e){var t,n;return null!==(n=null!==(t=e.prefix)&&void 0!==t?t:"".concat(B(e.serie,5)))&&void 0!==n?n:"".concat(e.suffix)}function D(e){return B(e.serie,e.decimal)}function M(){t.boxes.forEach((function(e){e.selected=!1}))}function U(){$(document).unbind("mouseup",F.bind(F)),m=!1}function B(e,t){var a=void 0,o=void 0;if(n.series.every((function(n){var o=n.fields.filter((function(e){return e.type===l.FieldType.number})).find((function(t){var a=Object(l.getFieldDisplayName)(t,n);return(void 0===n.name||n.name===a?a:n.name+" ("+a+")")===e}));return null==o||(a=u(o,t),!1)})),void 0===a&&n.series.every((function(t){var n=t.fields.find((function(n){var a=Object(l.getFieldDisplayName)(n,t);return(void 0===t.name||t.name===a?a:t.name+" ("+a+")")===e}));return null==n||(a=function(e){var t="N/A",n=null==e?void 0:e.values.length;if(n){for(;n--&&null==(null==e?void 0:e.values.get(n)););-1!==n&&(t=null==e?void 0:e.values.get(n).toString())}return t}(n),!1)})),void 0===a){var r=null==(o=n.series.find((function(t){return t.name===e})))?void 0:o.fields.find((function(e){return"number"===e.type}));a=u(r,t)}return void 0===a&&(a="N/A"),a}})).setPanelOptions((function(e){e.addTextInput({name:"Background URL",path:"bgURL"}).addCustomEditor({path:"boxes",name:"Boxes definitions",id:"boxesDefinitions",defaultValue:null,editor:R})})).setMigrationHandler((function(e){if(null!=e.boxes&&null==e.pluginVersion){var t=new B;return t.bgURL=e.bgURL,t.boxes=[],e.boxes.forEach((function(e){t.boxes.push({angle:e.angle,color:e.color,colorHigh:e.colorHigh,colorLow:e.colorLow,colorMedium:e.colorMedium,decimal:e.decimal,fontSize:e.fontsize,hasOrb:e.hasOrb,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:e.orbHideText,orbLocation:e.orbLocation,orbSize:e.orbSize,prefixSize:e.prefixSize,serie:e.serie,suffixSize:e.suffixSize,text:e.text,suffix:e.suffix,prefix:e.prefix,thresholds:e.thresholds,blinkHigh:e.blinkHigh,blinkLow:e.blinkLow,isUsingThresholds:e.usingThresholds,xpos:e.xpos,ypos:e.ypos,url:e.URL,symbolHideText:!1,symbol:"",symbolWidth:32,symbolHeight:32,symbolDefWidth:32,symbolDefHeight:32,colorSymbol:!1,customSymbol:"",selected:!1})})),t}return e.options}))}])}));
//# sourceMappingURL=module.js.map