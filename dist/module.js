define(["react","@grafana/ui","emotion","tslib","@grafana/data","@grafana/runtime"],(function(e,n,t,a,r,l){return function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(n){return e[n]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=6)}([function(n,t){n.exports=e},function(e,t){e.exports=n},function(e,n){e.exports=t},function(e,n){e.exports=a},function(e,n){e.exports=r},function(e,n){e.exports=l},function(e,n,t){"use strict";t.r(n);var a=t(3),r=t(4),l=t(0),o=t.n(l),i=t(2),c=t(1),s=t(5);function u(e,n){var t="N/A",a=null==e?void 0:e.values.length;if(a){for(;a--&&null==(null==e?void 0:e.values.get(a)););-1!==a&&(t=null==e?void 0:e.values.get(a).toFixed(n).toString())}return t}var b,m,f,d,p,h,g,x,v,E,O,k,j,y,C,z,S,T,w,_=function(e){e.ctrlKey&&alert("X:"+e.nativeEvent.offsetX+" Y:"+e.nativeEvent.offsetY)},L=Object(c.stylesFactory)((function(){return{wrapper:Object(i.css)(O||(O=Object(a.__makeTemplateObject)(["\n      display: flex;\n      justify-content: center;\n    "],["\n      display: flex;\n      justify-content: center;\n    "]))),imgWrapper:Object(i.css)(k||(k=Object(a.__makeTemplateObject)(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),box:Object(i.css)(j||(j=Object(a.__makeTemplateObject)(["\n      position: absolute;\n    "],["\n      position: absolute;\n    "]))),boxLink:Object(i.css)(y||(y=Object(a.__makeTemplateObject)(["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "],["\n      display: inline-block;\n      text-align: center;\n      color: unset;\n      &:hover {\n        color: unset;\n      }\n      &:focus {\n        color: unset;\n      }\n    "]))),orbDefaults:Object(i.css)(C||(C=Object(a.__makeTemplateObject)(["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "],["\n      border-radius: 50%;\n      border-style: solid;\n      border-width: thin;\n      border-color: #000;\n      display: inline-block;\n      font-size: 0px;\n    "]))),blink:Object(i.css)(z||(z=Object(a.__makeTemplateObject)(["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "],["\n      animation: blink_anim 0.8s linear infinite;\n      @keyframes blink_anim {\n        50% {\n          opacity: 0.2;\n        }\n      }\n    "]))),alignVertically:Object(i.css)(S||(S=Object(a.__makeTemplateObject)(["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "],["\n      display: inline-block;\n      white-space: normal;\n      vertical-align: middle;\n    "]))),boxPrefix:Object(i.css)(T||(T=Object(a.__makeTemplateObject)(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "]))),boxSuffix:Object(i.css)(w||(w=Object(a.__makeTemplateObject)(["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "],["\n      white-space: pre;\n      margin-right: 0.5ch;\n    "])))}})),F=function(){};t.d(n,"plugin",(function(){return H}));var H=new r.PanelPlugin((function(e){var n=e.options,t=e.data,l=(e.width,e.height,Object(s.getTemplateSrv)().replace(n.bgURL)),c=n.boxes,O=L();return o.a.createElement("div",{className:Object(i.cx)(O.wrapper)},o.a.createElement("div",{className:Object(i.cx)(O.imgWrapper),id:"img-wrapper"},o.a.createElement("img",{srcSet:l,onClick:function(e){return _(e)}}),c.map((function(e,n){return o.a.createElement("span",{key:n,className:Object(i.cx)(O.box,Object(i.css)(b||(b=Object(a.__makeTemplateObject)(["\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "],["\n                top: ","px;\n                left: ","px;\n                color: ",";\n                transform: rotate(","deg);\n              "])),e.ypos,e.xpos,j(e),e.angle))},o.a.createElement("a",{href:e.url?Object(s.getTemplateSrv)().replace(e.url):"#",className:Object(i.cx)(O.boxLink,e.url?Object(i.css)(m||(m=Object(a.__makeTemplateObject)(["\n                      cursor: pointer;\n                    "],["\n                      cursor: pointer;\n                    "]))):Object(i.css)(f||(f=Object(a.__makeTemplateObject)(["\n                      cursor: default;\n                    "],["\n                      cursor: default;\n                    "]))))},e.hasOrb&&e.orbHideText||e.hasOrb&&!e.orbHideText&&"Top"===e.orbLocation?o.a.createElement("span",{className:Object(i.cx)(k(e)?O.blink:"",O.orbDefaults,Object(i.css)(d||(d=Object(a.__makeTemplateObject)(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,j(e))),title:y(e)}):null,e.hasOrb&&e.orbHideText?null:o.a.createElement("div",{className:Object(i.cx)(Object(i.css)(p||(p=Object(a.__makeTemplateObject)(["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "],["\n                      font-size: ","px;\n                      line-heigh: normal;\n                    "])),e.fontSize))},e.hasOrb&&"Left"===e.orbLocation?o.a.createElement("span",{className:Object(i.cx)(k(e)?O.blink:"",O.orbDefaults,O.alignVertically,Object(i.css)(h||(h=Object(a.__makeTemplateObject)(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,j(e))),title:y(e)}):null,e.prefix?o.a.createElement("span",{className:Object(i.cx)(O.alignVertically,O.boxPrefix,Object(i.css)(g||(g=Object(a.__makeTemplateObject)(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.prefixSize)),title:y(e)},e.prefix):null,o.a.createElement("span",{className:Object(i.cx)(k(e)?O.blink:"",O.alignVertically)},C(e)),e.suffix?o.a.createElement("span",{className:Object(i.cx)(k(e)?O.blink:"",O.alignVertically,O.boxSuffix,Object(i.css)(x||(x=Object(a.__makeTemplateObject)(["\n                          font-size: ","px;\n                        "],["\n                          font-size: ","px;\n                        "])),e.suffixSize)),title:y(e)},e.suffix):null,e.hasOrb&&"Right"===e.orbLocation?o.a.createElement("span",{className:Object(i.cx)(k(e)?O.blink:"",O.orbDefaults,O.alignVertically,Object(i.css)(v||(v=Object(a.__makeTemplateObject)(["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "],["\n                          height: ","px;\n                          width: ","px;\n                          background-color: ",";\n                        "])),e.orbSize,e.orbSize,j(e))),title:y(e)}):null),e.hasOrb&&!e.orbHideText&&"Bottom"===e.orbLocation?o.a.createElement("span",{className:Object(i.cx)(k(e)?O.blink:"",O.orbDefaults,Object(i.css)(E||(E=Object(a.__makeTemplateObject)(["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "],["\n                      height: ","px;\n                      width: ","px;\n                      background-color: ",";\n                    "])),e.orbSize,e.orbSize,j(e))),title:y(e)}):null))}))));function k(e){if(e.isUsingThresholds&&e.thresholds&&(e.blinkHigh||e.blinkLow)){var n=C(e),t=+e.thresholds.split(",")[0],a=+e.thresholds.split(",")[1];if(e.blinkHigh&&+n>=a)return!0;if(e.blinkLow&&+n<=t)return!0}return!1}function j(e){var n=C(e);if(e.isUsingThresholds&&e.thresholds){var t=+e.thresholds.split(",")[0];return+n>=+e.thresholds.split(",")[1]?e.colorHigh:+n<=t?e.colorLow:e.colorMedium}return e.color}function y(e){var n,t;return null!==(t=null!==(n=e.prefix)&&void 0!==n?n:"".concat(z(e.serie,5)))&&void 0!==t?t:"".concat(e.suffix)}function C(e){return z(e.serie,e.decimal)}function z(e,n){var a=void 0,l=void 0;if(t.series.every((function(t){var l=t.fields.filter((function(e){return e.type===r.FieldType.number})).find((function(n){var a=Object(r.getFieldDisplayName)(n,t);return(void 0===t.name||t.name===a?a:t.name+" ("+a+")")===e}));return null==l||(a=u(l,n),!1)})),void 0===a&&t.series.every((function(n){var t=n.fields.find((function(t){var a=Object(r.getFieldDisplayName)(t,n);return(void 0===n.name||n.name===a?a:n.name+" ("+a+")")===e}));return null==t||(a=function(e){var n="N/A",t=null==e?void 0:e.values.length;if(t){for(;t--&&null==(null==e?void 0:e.values.get(t)););-1!==t&&(n=null==e?void 0:e.values.get(t).toString())}return n}(t),!1)})),void 0===a){var o=null==(l=t.series.find((function(n){return n.name===e})))?void 0:l.fields.find((function(e){return"number"===e.type}));a=u(o,n)}return void 0===a&&(a="N/A"),a}})).setPanelOptions((function(e){e.addTextInput({name:"Background URL",path:"bgURL"}).addCustomEditor({path:"boxes",name:"Boxes definitions",id:"boxesDefinitions",defaultValue:null,editor:function(e){var n=e.context,t=n.data,l=n.options;null==l.boxes&&(l.boxes=[]);var i=[{label:"Top",value:"Top"},{label:"Bottom",value:"Bottom"},{label:"Left",value:"Left"},{label:"Right",value:"Right"}],s=[];return t.forEach((function(e){e.fields.filter((function(e){return e.type===r.FieldType.number})).forEach((function(n){if(void 0!==n){var t=Object(r.getFieldDisplayName)(n,e),a=void 0===e.name||e.name===t?t:e.name+" ("+t+")";s.push({value:a,label:a})}}))})),o.a.createElement("div",{className:"section gf-form-group"},o.a.createElement("h4",{className:"section-heading"},"Boxes definitions"),l.boxes.map((function(n,t){return o.a.createElement("div",{key:t},o.a.createElement("h5",null,"Box #",t),o.a.createElement("div",{className:"section gf-form-group"},o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.IconButton,{name:"trash-alt",size:"xl",surface:"panel",onClick:function(n){return function(n,t){n.target;delete l.boxes[t],l.boxes.splice(t,1),e.onChange(l.boxes)}(n,t)}}),o.a.createElement(c.IconButton,{name:"copy",size:"xl",surface:"panel",onClick:function(t){return function(n,t){n.target;l.boxes.push(Object(a.__assign)({},t)),e.onChange(l.boxes)}(t,n)}}))),o.a.createElement("div",{className:"section gf-form-group"},o.a.createElement("h5",{className:"section-heading"},"Metric"),o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.Field,{label:"Name"},o.a.createElement(c.Input,{type:"text",readOnly:!0,value:n.serie,width:16})),o.a.createElement(c.ValuePicker,{label:"Change Metric",icon:"exchange-alt",options:s,onChange:function(t){return a=t.value,n.serie=a,void e.onChange(l.boxes);var a},variant:"secondary",size:"sm"}),o.a.createElement(c.Field,{label:"Prefix"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.prefix=r.value,void e.onChange(l.boxes);var a,r},value:n.prefix})),o.a.createElement(c.Field,{label:"Suffix"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.suffix=r.value,void e.onChange(l.boxes);var a,r},value:n.suffix}))),o.a.createElement(c.HorizontalGroup,null,n.prefix?o.a.createElement(o.a.Fragment,null,o.a.createElement(c.Field,{label:"Prefix size"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.prefixSize=r.value,void e.onChange(l.boxes);var a,r},value:n.prefixSize}))):null,n.suffix?o.a.createElement(o.a.Fragment,null,o.a.createElement(c.Field,{label:"Suffix size"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.suffixSize=r.value,void e.onChange(l.boxes);var a,r},value:n.suffixSize}))):null)),o.a.createElement("div",{className:"section gf-form-group"},o.a.createElement("h5",{className:"section-heading"},"Position and Link"),o.a.createElement(c.Tooltip,{theme:"info",content:o.a.createElement("p",null,"You can easily find the coordinates if you ",o.a.createElement("code",null,"ctrl"),"+",o.a.createElement("code",null,"left click"),"anywhere on your image")},o.a.createElement(c.Icon,{name:"info-circle"})),o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.Field,{label:"X"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.xpos=r.value,void e.onChange(l.boxes);var a,r},value:n.xpos})),o.a.createElement(c.Field,{label:"Y"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.ypos=r.value,void e.onChange(l.boxes);var a,r},value:n.ypos}))),o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.Field,{label:"Angle"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.angle=r.value,void e.onChange(l.boxes);var a,r},value:n.angle})),o.a.createElement(c.Field,{label:"Link"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.url=r.value,void e.onChange(l.boxes);var a,r},value:n.url})))),o.a.createElement("div",{className:"section gf-form-group"},o.a.createElement("h5",{className:"section-heading"},"Appearance"),o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.Field,{label:"Decimal"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.decimal=r.value,void e.onChange(l.boxes);var a,r},value:n.decimal})),o.a.createElement(c.Field,{label:"Font-size"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.fontSize=r.value,void e.onChange(l.boxes);var a,r},value:n.fontSize}))),o.a.createElement(c.HorizontalGroup,null,o.a.createElement("div",{className:"width-5"},o.a.createElement(c.Field,{label:"Show Orb"},o.a.createElement(c.Switch,{value:n.hasOrb,checked:n.hasOrb,onChange:function(t){return a=n,r=t.target,a.hasOrb=r.checked,void e.onChange(l.boxes);var a,r}}))),n.hasOrb?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"width-6"},o.a.createElement(c.Field,{label:"Hide text"},o.a.createElement(c.Switch,{checked:n.orbHideText,onChange:function(t){return a=n,r=t.target,a.orbHideText=r.checked,void e.onChange(l.boxes);var a,r}}))),n.orbHideText?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"width-12"},o.a.createElement(c.Field,{label:"Orb Location"},o.a.createElement(c.Select,{options:i,onChange:function(t){return a=t,n.orbLocation=a.value,void e.onChange(l.boxes);var a},value:n.orbLocation})))),o.a.createElement("div",null,o.a.createElement(c.Field,{label:"Orb Size"},o.a.createElement(c.Input,{type:"text",value:n.orbSize,onChange:function(t){return a=n,r=t.target,a.orbSize=r.value,void e.onChange(l.boxes);var a,r}})))):null),o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.Field,{label:"Use Thresholds"},o.a.createElement(c.Switch,{onChange:function(t){return a=n,r=t.target,a.isUsingThresholds=r.checked,void e.onChange(l.boxes);var a,r},value:n.isUsingThresholds})),n.isUsingThresholds?o.a.createElement(o.a.Fragment,null,o.a.createElement(c.Tooltip,{content:o.a.createElement("p",null,"Enter 2 comma-separated numbers. 20,60 will produce: ",o.a.createElement("code",null,"value <= 20")," -> green ",o.a.createElement("br",null),o.a.createElement("code",null,"value between 20 and 60")," -> yellow ",o.a.createElement("br",null),o.a.createElement("code",null,"value >= 60")," -> red"," ")},o.a.createElement(c.Icon,{name:"info-circle"})),o.a.createElement(c.Field,{label:"Thresholds"},o.a.createElement(c.Input,{type:"text",onChange:function(t){return a=n,r=t.target,a.thresholds=r.value,void e.onChange(l.boxes);var a,r},value:n.thresholds})),o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.ColorPicker,{color:n.colorLow,onChange:function(t){return function(n,t){t.colorLow=n,e.onChange(l.boxes)}(t,n)}}),o.a.createElement(c.ColorPicker,{color:n.colorMedium,onChange:function(t){return function(n,t){t.colorMedium=n,e.onChange(l.boxes)}(t,n)}}),o.a.createElement(c.ColorPicker,{color:n.colorHigh,onChange:function(t){return function(n,t){t.colorHigh=n,e.onChange(l.boxes)}(t,n)}}))):o.a.createElement(c.Field,{label:"Color"},o.a.createElement(c.ColorPicker,{color:n.color,onChange:function(t){return function(n,t){t.color=n,e.onChange(l.boxes)}(t,n)}}))),n.isUsingThresholds?o.a.createElement(c.HorizontalGroup,null,o.a.createElement(c.Field,{label:"Blink if low"},o.a.createElement(c.Switch,{onChange:function(t){return a=n,r=t.target,a.blinkLow=r.checked,void e.onChange(l.boxes);var a,r},value:n.blinkLow})),o.a.createElement(c.Field,{label:"Blink if high"},o.a.createElement(c.Switch,{onChange:function(t){return a=n,r=t.target,a.blinkHigh=r.checked,void e.onChange(l.boxes);var a,r},value:n.blinkHigh}))):null),o.a.createElement("hr",null))})),o.a.createElement(c.Button,{variant:"primary",size:"md",icon:"plus",onClick:function(n){n.target;null==l.boxes&&(l.boxes=[]),l.boxes.push({angle:0,color:"#fff",colorHigh:"#f00",colorLow:"#0f0",colorMedium:"#fa1",decimal:0,fontSize:12,hasOrb:!1,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:!1,orbLocation:"Left",orbSize:10,prefixSize:10,serie:"A-Serie",suffixSize:10,text:"N/A",suffix:"",prefix:"",thresholds:"",blinkHigh:!0,blinkLow:!1,isUsingThresholds:!1,xpos:0,ypos:0,url:""}),e.onChange(l.boxes)}},"Add a box"))}})})).setMigrationHandler((function(e){if(null!=e.boxes&&null==e.pluginVersion){var n=new F;return n.bgURL=e.bgURL,n.boxes=[],e.boxes.forEach((function(e){n.boxes.push({angle:e.angle,color:e.color,colorHigh:e.colorHigh,colorLow:e.colorLow,colorMedium:e.colorMedium,decimal:e.decimal,fontSize:e.fontsize,hasOrb:e.hasOrb,hasBackground:!1,backgroundColor:"#5794F2",orbHideText:e.orbHideText,orbLocation:e.orbLocation,orbSize:e.orbSize,prefixSize:e.prefixSize,serie:e.serie,suffixSize:e.suffixSize,text:e.text,suffix:e.suffix,prefix:e.prefix,thresholds:e.thresholds,blinkHigh:e.blinkHigh,blinkLow:e.blinkLow,isUsingThresholds:e.usingThresholds,xpos:e.xpos,ypos:e.ypos,url:e.URL})})),n}return e.options}))}])}));
//# sourceMappingURL=module.js.map